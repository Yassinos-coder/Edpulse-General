<style>
  /* ====================
         Variables
      ==================== */
  :root {
    --primary-yellow: #ffb81c;
    --primary-blue: #003366;
    --active-blue: #002244;
    --gray: #999;
    --light-gray: #666;
    --error: #ff0000;
    --icon-size: 40px;
    --step-gap: 30px;
    --transition-duration: 0.3s;
  }

  /* ====================
         Stepper Container
      ==================== */
  .fluent-form-stepper {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    justify-content: center;
    position: relative;
    font-family: "Arial", sans-serif;
    height: 640px;
    max-height: 640px;
    background-color: white;
    margin-left: 80px;
  }

  /* ====================
         Step Block
      ==================== */
  .fluent-form-step {
    position: relative;
    margin-bottom: var(--step-gap);
    display: flex;
    flex-direction: row;
    align-items: center;
    width: 100%;
    gap: 5%;
    z-index: 20; /* Increased from 10 to ensure steps are above connecting lines */
    transition: all var(--transition-duration) ease;
  }

  .fluent-form-step.active {
    z-index: 25; /* Increased to ensure active step is prominently displayed */
  }

  /* ====================
         Step Icon
      ==================== */
  .iconDiv {
    background-color: var(--primary-yellow);
    width: var(--icon-size);
    height: var(--icon-size);
    border-radius: 50%;
    display: flex;
    justify-content: center;
    align-items: center;
    opacity: 0.5;
    position: relative;
    padding-left: 7px !important;
    padding: 5px;
    transition: opacity var(--transition-duration) ease;
    z-index: 30 !important;
    margin-left: 15px;
  }

  .fluent-form-step.active .iconDiv {
    opacity: 1 !important;
  }

  .imgIcons {
    width: 80% !important;
    height: 70%;
    z-index: 35 !important; /* Increased to ensure icon images are above everything */
    position: relative;
  }

  /* ====================
     Step Content
  ==================== */
  .fluent-form-step-content {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    position: relative;
    z-index: 25; /* Ensure text is above connecting lines */
    opacity: 0.7; /* Default low opacity */
    transition: opacity var(--transition-duration) ease;
  }

  .fluent-form-step.active .fluent-form-step-content {
    opacity: 1; /* Full opacity when step is active */
  }

  .fluent-form-step-title {
    font-size: 14px;
    color: var(--gray);
    font-weight: bold;
    margin-bottom: 4px;
    position: relative;
    transition: color var(--transition-duration) ease;
  }

  .fluent-form-step-label {
    font-size: 16px;
    color: var(--primary-blue);
    font-weight: 700;
    text-align: left;
    transition: color var(--transition-duration) ease;
  }

  .fluent-form-step.active .fluent-form-step-title {
    color: var(--light-gray);
  }

  .fluent-form-step.active .fluent-form-step-label {
    color: var(--active-blue);
  }

  /* ====================
         Validation & Errors
      ==================== */
  .ff-el-group.has-error .ff-el-control-wrapper input,
  .ff-el-group.has-error .ff-el-control-wrapper select,
  .ff-el-group.has-error .ff-el-control-wrapper textarea,
  .ff-el-group.has-error .ff-el-control-wrapper .ff_file_upload_holder {
    border-color: var(--error) !important;
  }

  .ff-el-group.has-error .ff-el-input-label {
    color: var(--error) !important;
  }

  .form-error-message {
    color: var(--error);
    font-size: 14px;
    margin-top: 5px;
    display: none;
  }

  .form-error-message.show {
    display: block;
  }

  /* ====================
         Horizontal Line Connector
      ==================== */

  #step-connector {
    position: relative;
    border: 0;
    width: 120px;
    border-top: 3px solid var(--primary-yellow);
    border-radius: 50px;
    transform: rotate(90deg);
    left: -25px;
    top: 107px;
    opacity: 0.2;
    z-index: 5 !important;
    transition: opacity 0.3s ease;
  }

  /* ==================
        IMG OF INDEED
    ==================*/
  #img_indeed_avis_container {
    background-color: white;
    width: 95%;
    margin-left: 10px;
  }

  #bottom_img_left_side_panel {
    margin-top: 20px; /* Added margin to separate from steps */
    max-width: 100%; /* Ensure image doesn't overflow container */
    /* box-shadow: 1px 0px 6px 0px rgba(133, 133, 133, 0.75);
    -webkit-box-shadow: 1px 0px 6px 0px rgba(133, 133, 133, 0.75);
    -moz-box-shadow: 1px 0px 6px 0px rgba(133, 133, 133, 0.75);*/
    border-radius: 10px;
  }

  #fluent-form-subContainer {
    box-shadow: 0px 0px 5px 1px rgba(153, 153, 153, 0.2);
    -webkit-box-shadow: 0px 0px 5px 1px rgba(153, 153, 153, 0.2);
    -moz-box-shadow: 0px 0px 5px 1px rgba(153, 153, 153, 0.2);
    padding-top: 95px;
    padding-bottom: 35px;
    border-radius: 5px;
  }

  /* ====================
         Responsive (Mobile)
      ==================== */
  @media (max-width: 768px) {
    .fluent-form-stepper {
      padding-left: 30px;
    }

    .step-connector {
      left: 14px; /* Adjust for smaller padding on mobile */
    }
  }
  @media (max-width: 1200px) {
    .fluent-form-stepper {
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      justify-content: center;
      position: relative;
      font-family: "Arial", sans-serif;
      height: 640px;
      max-height: 640px;
      background-color: white;
      margin-left: 30px;
    }
  }
</style>
<link
  rel="preload"
  as="image"
  href="https://tutorax.com/wp-content/uploads/2025/04/Draft-Formulaire-recrutement_pic_below.png"
/>
<link
  rel="preload"
  as="image"
  href="https://tutorax.com/wp-content/uploads/2025/04/Draft-Formulaire-recrutement_pic_below_step_3.png"
/>

<div class="fluent-form-stepper">
  <div id="fluent-form-subContainer">
    <hr id="step-connector" />

    <!-- Step 1 -->
    <div class="fluent-form-step active" id="step-1" data-step-index="0">
      <div class="iconDiv">
        <img
          class="imgIcons"
          src="https://tutorax.com/wp-content/uploads/2025/04/Draft-Formulaire-recrutement.svg"
          alt=""
        />
      </div>
      <div class="fluent-form-step-content">
        <div class="fluent-form-step-title">Étape 1</div>
        <div class="fluent-form-step-label">Informations personnelles</div>
      </div>
    </div>

    <!-- Step 2 -->
    <div
      class="fluent-form-step fluent-form-step2"
      id="step-2"
      data-step-index="1"
    >
      <div class="iconDiv">
        <img
          class="imgIcons"
          src="https://tutorax.com/wp-content/uploads/2025/04/Draft-Formulaire-recrutement1.svg"
          alt=""
        />
      </div>
      <div class="fluent-form-step-content">
        <div class="fluent-form-step-title">Étape 2</div>
        <div class="fluent-form-step-label">Critères de sélection</div>
      </div>
    </div>

    <!-- Step 3 -->
    <div
      class="fluent-form-step fluent-form-step3"
      id="step-3"
      data-step-index="2"
    >
      <div class="iconDiv">
        <img
          class="imgIcons"
          src="https://tutorax.com/wp-content/uploads/2025/04/Draft-Formulaire-recrutement3.svg"
          alt=""
        />
      </div>
      <div class="fluent-form-step-content">
        <div class="fluent-form-step-title">Étape 3</div>
        <div class="fluent-form-step-label">Études et expérience</div>
      </div>
    </div>
    <div id="img_indeed_avis_container">
      <img id="bottom_img_left_side_panel" src="" alt="" />
    </div>
  </div>
</div>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    console.log("Custom Fluent Form script loaded");

    const steps = document.querySelectorAll(".fluent-form-step");
    const formContainer = document.querySelector(".fluent_form_90");

    if (!formContainer) {
      console.error(
        "Form container not found! Make sure the selector is correct."
      );
      return;
    }

    const nextButtons = formContainer.querySelectorAll(".ff-btn-next");
    const prevButtons = formContainer.querySelectorAll(".ff-btn-prev");
    const stepSections = Array.from(
      formContainer.querySelectorAll(".ff-step-body")
    );
    const totalSteps = steps.length; // Total number of steps
    let stepCounter = 1; // Start at Step 1

    function updateStepImage(counter) {
      const img = document.getElementById("bottom_img_left_side_panel");
      if (!img) return;

      const images = [
        "https://tutorax.com/wp-content/uploads/2025/04/Draft-Formulaire-recrutement.png", // Step 1
        "https://tutorax.com/wp-content/uploads/2025/04/Draft-Formulaire-recrutement-1.png", // Step 2
        "https://tutorax.com/wp-content/uploads/2025/04/Draft-Formulaire-recrutement-2.png", // Step 3
      ];

      const imageIndex = counter - 1; // because counter starts at 1
      if (images[imageIndex]) {
        img.src = images[imageIndex];
      }
    }

    function updateActiveStepUI(counter) {
      steps.forEach((step, i) => {
        step.classList.remove("active", "completed");
        if (i < counter - 1) step.classList.add("completed"); // completed steps
        if (i === counter - 1) step.classList.add("active"); // active step
      });

      const connector = document.getElementById("step-connector");
      if (connector) {
        connector.style.opacity = counter === 2 ? "1" : "0.2";
      }
    }

    function handleStepChange() {
      console.log("StepCounter changed to:", stepCounter);

      // Prevent stepCounter going outside bounds
      if (stepCounter < 1) stepCounter = 1;
      if (stepCounter > totalSteps) stepCounter = totalSteps;

      updateActiveStepUI(stepCounter);
      updateStepImage(stepCounter);
    }

    nextButtons.forEach((btn) => {
      btn.addEventListener("click", () => {
        stepCounter++;
        setTimeout(handleStepChange, 300); // Little delay to let FluentForm switch
      });
    });

    prevButtons.forEach((btn) => {
      btn.addEventListener("click", () => {
        stepCounter--;
        setTimeout(handleStepChange, 300);
      });
    });

    // Initial setup
    setTimeout(handleStepChange, 500);
  });
</script>
